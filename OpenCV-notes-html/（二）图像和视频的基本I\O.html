<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>å‰è¨€</title>
    </head>
    <body style="padding: 10px 10px 10px 10px;margin-left: 20%;margin-right: 20%;line-height: initial;">
        <p>å¼€é—¨è§å±±ï¼Œç›´å…¥æ­£é¢˜ ğŸˆ</p>
        <h3>å¤„ç†æ–‡ä»¶</h3>
        <h4>å¸¸ç”¨å‡½æ•°ä»‹ç»</h4>
        <p>åœ¨ OpenCV ä¸­æä¾›äº†<code>cv2.imread()</code>å‡½æ•°ç”¨äºè¯»å–å›¾ç‰‡å’Œ <code>cv2.imwrite()</code>å‡½æ•°ç”¨äºä¿å­˜å›¾ç‰‡ã€‚</p>
        <pre><code class='language-python' lang='python'>cv2.imread(&#39;imgname.jpg&#39;,flag)
        cv2.imwrite(&#39;imgname.jpg&#39;,img)
        </code></pre>
        <p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è¯»å–ï¼ˆæˆ–è¾“å‡ºï¼‰å›¾ç‰‡çš„æ–‡ä»¶åï¼Œ<code>img</code>æ˜¯æˆ‘ä»¬è¦ä¿å­˜çš„å¯¹è±¡ã€‚</p>
        <p>å‚æ•°<code>flag</code>ä»‹ç»ğŸ•µï¸â€â™‚ï¸ï¼š</p>
        <ul>
        <li><p>IMREAD_UNCHANGED = -1, //!&lt; If set, return the loaded image as is (with alpha channel, otherwise it gets cropped).   </p>
        <ul>
        <li>flag = -1 -&gt; 8ä½æ·±åº¦ã€åŸé€šé“</li>
        
        </ul>
        </li>
        <li><p>IMREAD_GRAYSCALE = 0,  //!&lt; If set, always convert image to the single channel grayscale image.  </p>
        <ul>
        <li>flag = 0 -&gt; 8ä½æ·±åº¦ã€1é€šé“</li>
        
        </ul>
        </li>
        <li><p>IMREAD_COLOR = 1,  //!&lt; If set, always convert image to the 3 channel BGR color image. </p>
        <ul>
        <li>flag = 1 -&gt; 8ä½æ·±åº¦ã€3é€šé“</li>
        
        </ul>
        </li>
        <li><p>IMREAD_ANYDEPTH = 2,  //!&lt; If set, return 16-bit/32-bit image when the input has the corresponding depth, otherwise convert it to 8-bit.  </p>
        <ul>
        <li>flag = 2 -&gt; åŸæ·±åº¦ã€1é€šé“</li>
        
        </ul>
        </li>
        <li><p>IMREAD_ANYCOLOR = 4,  //!&lt; If set, the image is read in any possible color format.  </p>
        <ul>
        <li>flag = 3 -&gt; åŸæ·±åº¦ã€3é€šé“</li>
        
        </ul>
        </li>
        <li><p>IMREAD_LOAD_GDAL = 8   //!&lt; If set, use the gdal driver for loading the image.   </p>
        <ul>
        <li>flag = 4 -&gt; 8ä½æ·±åº¦ã€3é€šé“</li>
        
        </ul>
        </li>
        
        </ul>
        <p>ä½¿ç”¨<code>cv2.imshow()</code>å‡½æ•°åœ¨çª—å£ä¸­æ˜¾ç¤ºå›¾åƒã€‚çª—å£ä¼šæ ¹æ®å›¾åƒå¤§å°è‡ªåŠ¨è°ƒæ•´ã€‚</p>
        <pre><code class='language-python' lang='python'>cv2.imshow(&#39;windowsname&#39;,img)
        </code></pre>
        <p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è§„å®šçª—å£çš„åç§°ï¼Œå®ƒæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯æˆ‘ä»¬è¦å±•ç¤ºçš„å¯¹è±¡ã€‚</p>
        <p><code>imshow</code>è¿˜æœ‰ä¸€ç§ä½¿ç”¨æ–¹æ³•æ˜¯å…ˆè®¾ç½®çª—å£åç§°å†å¯¼å…¥å›¾åƒï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p>
        <pre><code class='language-python' lang='python'>cv2.namedWindow(&#39;windowsname&#39;,cv2.WINDOW_NORMAL)
        #è‹¥å°† cv2.WINDOW_NORMAL æ”¹ä¸º cv2.WINDOW_AUTOSIZE åˆ™åˆ›å»ºçš„çª—å£å¤§å°ä¸å¯å˜ğŸ“Œ
        cv2.imshow(&#39;windowsname&#39;,img)
        </code></pre>
        <p>æˆ‘ä»¬å‘ç°åœ¨ä½¿ç”¨<code>imshow</code>å±•ç¤ºçš„å›¾ç‰‡æ€»æ˜¯ä¸€é—ªè€Œè¿‡ğŸƒï¼Œè§£å†³æ–¹æ³•ï¼Œåœ¨<code>imshow</code>ååŠ å…¥å¦‚ä¸‹ä»£ç ï¼š</p>
        <pre><code class='language-python' lang='python'>cv2.waitKey(0) #ğŸ†æ˜¯å®ƒåœ¨èµ·ä½œç”¨å“¦
        cv2.destroyAllWindows()
        </code></pre>
        <ul>
        <li><code>cv2.waitKey()</code>ç­‰å¾…é”®ç›˜è¾“å…¥ï¼Œä¸ºæ¯«ç§’çº§</li>
        <li><code>cv2.destroyAllWindows()</code>å¯ä»¥åˆ é™¤æ‰€æœ‰æˆ‘ä»¬å»ºç«‹çš„çª—å£</li>
        
        </ul>
        <p>æ¥ä¸‹æ¥ä»‹ç»è§†é¢‘åŠæ‘„åƒå¤´çš„æ“ä½œï¼Œå’Œå›¾åƒç±»ä¼¼</p>
        <pre><code class='language-python' lang='python'>#è¯»å–è§†é¢‘
        import numpy as np
        import cv2
        video = cv2.VideoCapture(&#39;filename.avi&#39;)
        while(True):
            #é€å¸§è¯»å–
            ret , frame = video.read()
            #é€å¸§å±•ç¤º videofile-&gt;frame-&gt;video
            cv2.imshow(&#39;frame&#39;,frame)
            if cv2.waitKey(1) &amp; 0xFF == ord(&#39;q&#39;):  #æŒ‰qé”®é€€å‡º
                break
        cv2.destroyAllWindows()
        </code></pre>
        <p>è¦è¯»å–æ‘„åƒå¤´çš„è¯åªéœ€å°† filename.avi æ¢æˆæ‘„åƒå¤´å¼•ç´¢</p>
        <pre><code class='language-python' lang='python'>#ä¸¾ä¸ªä¾‹å­
        import numpy as np
        import cv2
        video = cv2.VideoCapture(0)  #0ğŸ“·
        while(True):
            #é€å¸§è¯»å–
            ret , img = video.read()
            #é€å¸§å±•ç¤º camera-&gt;freame-&gt;video
            cv2.imshow(&#39;Video&#39;,img)
            if cv2.waitKey(1) &amp; 0xFF == ord(&#39;q&#39;):  #æŒ‰qé”®é€€å‡º
                break
        video.release()  #é‡Šæ”¾æ‘„åƒå¤´ğŸ¬ï¼Œåˆ«å¿˜äº†å®ƒ
        cv2.destroyAllWindows()
        #è¿è¡Œä»¥ä¸Šä»£ç å°±èƒ½çœ‹è§ä½ è‡ªå·±å•¦ğŸ˜‰
        </code></pre>
        <p>demoï¼šæ˜¾ç¤ºæ‘„åƒå¤´è§†é¢‘ï¼Œé¼ æ ‡ç‚¹å‡»ç»“æŸ</p>
        <pre><code class='language-python' lang='python'>import cv2
        
        clicked = False
        def onMouse(event,x,y,flags,param):
            global clicked
            if event == cv2.EVENT_LBUTTONUP:  #é¼ æ ‡å·¦é”®æ¾å¼€
                clicked = True
        
        cameraCapture = cv2.VideoCapture(0)
        cv2.namedWindow(&#39;ShowMe&#39;)  #ä¸Šé¢ä»‹ç»è¿‡å’¯ğŸ¥³
        cv2.setMouseCallback(&#39;ShowMe&#39;,onMouse)  #è·å–é¼ æ ‡è¾“å…¥ğŸ–±
        print(&#39;showing camera feed,click window or press any key to stop&#39;)
        success,frame = cameraCapture.read()  
        #å¥½åƒå¿˜äº†ä»‹ç»ğŸ˜…ï¼Œread()è¿”å›çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå¸ƒå°”ç±»å‹ï¼ˆæˆåŠŸä¸ºTrue,å¤±è´¥ä¸ºFalse)ï¼Œç¬¬äºŒä¸ªä¸ºæ¯ä¸€å¸§çš„å›¾ç‰‡
        while success and cv2.waitKey(1) == -1 and not clicked:
            cv2.imshow(&#39;ShowMe&#39;,frame)
            success,frame = cameraCapture.read()
        
        cv2.destroyWindow(&#39;ShowMe&#39;)
        cameraCapture.release()
        </code></pre>
        <p><code>setMouseCallback()</code>æš‚æ—¶ä¸å±•å¼€ä»‹ç»ï¼Œåé¢è¡¥å……ä¸ŠğŸ˜¶</p>
        <p>demoï¼šè¯»å–æ‘„åƒå¤´ï¼Œå½•åˆ¶ 10s çš„è§†é¢‘å¹¶ä¿å­˜</p>
        <pre><code class='language-python' lang='python'>import cv2
        import numpy as np
        
        cameraCapture = cv2.VideoCapture(0)
        fps = 30  #get()æ–¹æ³•æ— æ³•è·å¾—æ‘„åƒå¤´çš„å‡†ç¡®å¸§ç‡ï¼Œéœ€è®¾å®šï¼
        size = (int(cameraCapture.get(cv2.CAP_PROP_FRAME_WIDTH)),
                int(cameraCapture.get(cv2.CAP_PROP_FRAME_HEIGHT)))  #get()æ–¹æ³•è·å–å®½åº¦å’Œé«˜åº¦
        videoWriter = cv2.VideoWriter(&#39;myVideo.avi&#39;,cv2.VideoWriter_fourcc(&#39;X&#39;,&#39;V&#39;,&#39;I&#39;,&#39;D&#39;),fps,size)
        #cv2.VideoWriter (&#39;vioeoname&#39;,è§†é¢‘ç¼–è§£ç å™¨,fps,size)
        success,frame = cameraCapture.read()
        numPramesRemaining = 10 * fps - 1
        while success and numPramesRemaining &gt; 0:
            videoWriter.write(frame)  #é€å¸§å†™å…¥
            success,frame = cameraCapture.read()
            numPramesRemaining -= 1
        cameraCapture.release()  #é‡Šæ”¾æ‘„åƒå¤´
        </code></pre>
        <p>å…³äºè§†é¢‘ç¼–è§£ç å™¨å¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ï¼Œæœ‰å¾ˆè¯¦ç»†çš„è¯´æ˜ï¼š<a href='https://blog.csdn.net/dcrmg/article/details/52215930'>ç‚¹å‡»è·³è½¬</a></p>
        <p>æœ¬æœŸå°±åˆ°æ­¤ç»“æŸå•¦ğŸ</p>
    </body>
</html>
